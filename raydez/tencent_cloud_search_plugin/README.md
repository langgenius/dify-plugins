# 腾讯云联网搜索API - Dify插件

## 简介

这是一个为Dify平台开发的腾讯云联网搜索API插件，基于搜狗搜索引擎，提供强大的互联网搜索功能。

## 功能特性

- 🔍 **全网搜索**: 基于搜狗搜索引擎的全网数据检索
- 🎯 **多种搜索模式**: 支持自然结果、多模态VR卡、混合结果
- 🏢 **网站筛选**: 支持指定网站内搜索
- ⏰ **时间筛选**: 支持按时间范围筛选搜索结果
- 🏭 **行业筛选**: 支持党政机关、权威媒体等垂域搜索（尊享版）
- 📊 **结构化数据**: 支持天气、股价、汇率等多模态VR卡结果

## 安装配置

### 1. 获取腾讯云API密钥

1. 登录 [腾讯云控制台](https://cloud.tencent.com/)
2. 进入 [API密钥管理](https://console.cloud.tencent.com/cam/capi)
3. 创建或获取 SecretId 和 SecretKey

### 2. 开通联网搜索服务

1. 在腾讯云控制台搜索"联网搜索API"
2. 开通服务并完成实名认证
3. 选择标准版（千次46元）或尊享版（千次80元）

### 3. 在Dify中配置插件

1. 在Dify工作台中添加此插件
2. 配置腾讯云API密钥：
   - Secret ID: 您的腾讯云SecretId
   - Secret Key: 您的腾讯云SecretKey

## 使用方法

### 基础搜索

```python
# 简单搜索
search_tool.invoke({
    "query": "人工智能发展趋势"
})
```

### 高级搜索

```python
# 指定网站搜索
search_tool.invoke({
    "query": "机器学习",
    "site": "github.com",
    "mode": "0",
    "count": 20
})

# 时间范围搜索
search_tool.invoke({
    "query": "ChatGPT最新消息",
    "from_time": 1704067200,  # 2024-01-01
    "to_time": 1735689600,   # 2025-01-01
    "mode": "2"
})

# 行业筛选搜索（尊享版）
search_tool.invoke({
    "query": "政策解读",
    "industry": "gov",
    "mode": "0"
})
```

## 参数说明

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| query | string | 是 | 搜索关键词，建议64字符以内 |
| mode | select | 否 | 搜索模式：0=自然结果，1=VR卡，2=混合 |
| site | string | 否 | 指定网站搜索，如"qq.com" |
| count | number | 否 | 结果数量，10-50（尊享版功能） |
| from_time | number | 否 | 开始时间戳，需配合to_time使用 |
| to_time | number | 否 | 结束时间戳，需配合from_time使用 |
| industry | select | 否 | 行业筛选：gov=政府，news=媒体（尊享版） |

## 返回结果

### 自然搜索结果
- 标题、摘要、URL
- 发布时间、来源网站
- 相关性得分
- 原文图片（如有）

### 多模态VR卡结果
- 百科信息
- 实时天气
- 股价汇率
- 万年历等结构化数据

## 费用说明

- **标准版**: 千次调用46元
- **尊享版**: 千次调用80元
- 按日后付费结算
- 支持子账号分账单

## 注意事项

1. **字符限制**: 搜索关键词建议64字符以内，超过1500字节会报错
2. **时间参数**: FromTime和ToTime必须同时使用
3. **尊享版功能**: count、industry参数仅尊享版支持
4. **API限制**: 遵循腾讯云API调用频率限制

## 错误处理

插件包含完整的错误处理机制：
- 参数验证
- API调用异常处理
- 响应格式验证
- 友好的错误提示

## 技术支持

如有问题，请联系：
- 腾讯云客服：通过腾讯云控制台提交工单
- 插件问题：请在GitHub仓库提交Issue

## 许可证

MIT License