# 文件操作工具集

**作者:** hanw39
**版本:** 0.0.1
**类型:** plugin

## 项目概述

这是一个模块化的文件操作工具集合，提供各种文件处理功能。项目采用可扩展架构设计，允许轻松添加新的文件操作工具。当前实现了文件哈希计算功能，后续将陆续添加更多文件操作工具。

## 架构设计

项目采用分层架构：

- **Provider层**：作为所有文件操作工具的统一入口，处理认证和通用功能
- **Tool层**：实现具体的文件操作功能，每个工具独立维护和开发

## 当前工具

### 文件哈希工具

计算文件的哈希摘要，支持多种算法和格式。

#### 功能特点

- **多种哈希算法支持**
  - 传统算法：MD2、MD5、SHA-1
  - 现代标准算法：SHA-256、SHA-384、SHA-512
  - 高级现代算法：SHA3-256、BLAKE2b
- **多种输出格式**
  - 十六进制（默认）
  - Base64编码
  - 二进制表示
- **高级功能**
  - 支持从URL下载文件并计算哈希
  - 支持多文件批量处理
  - 大文件分块处理，带进度报告
  - 哈希值验证（通过预期哈希值比较）
  - 算法安全性评级
  - 详细的性能统计
- **用户友好**
  - 直观的界面设计
  - 详细的结果输出
  - 智能错误处理

#### 使用方法
![img.png](img.png)
![img_3.png](img_3.png)
![img_2.png](img_2.png)

#### 返回结果
工具返回一个包含以下信息的JSON对象：
- 成功/失败状态
- 文件基本信息（名称、大小等）
- 所选算法及其安全性评级
- 生成的哈希值（按指定格式）
- 处理时间（毫秒）
- 验证结果（如有预期哈希值）
```json
  {
  "text": "",
  "files": [],
  "json": [
    {
      "code": 0,
      "message": "正在下载文件 售前方案自助评审表-出口信保电档241216.xlsx...",
      "progress": 0,
      "status": "processing"
    },
    {
      "code": 0,
      "data": {
        "file": {
          "name": "售前方案自助评审表-出口信保电档241216.xlsx",
          "size": {
            "bytes": 3469575,
            "readable": "3.31 MB"
          }
        },
        "hash": {
          "algorithm": "MD5",
          "format": "base64",
          "security": {
            "description": "已被破解，仅用于完整性检查",
            "rating": "不安全"
          },
          "value": "mvWXxH2wZMeeLPZ28EZHFA=="
        },
        "processing_time_ms": 10.19,
        "status": "success",
        "verification": {
          "actual": "mvWXxH2wZMeeLPZ28EZHFA==",
          "expected": "111",
          "status": "不匹配",
          "verified": false
        }
      },
      "message": "哈希计算完成，验证结果: 不匹配"
    }
  ]
}
```

#### 批量处理

支持同时处理多个文件，返回聚合结果：
- 总文件数
- 成功/失败数量
- 每个文件的详细结果

## 计划中的工具

项目将陆续添加更多文件操作工具，包括但不限于：

- 文件格式转换
- 图像处理
- 文档内容提取
- 文件压缩/解压
- 文件元数据提取

## 技术实现

- 对大文件使用分块处理算法，避免内存溢出
- 使用Python标准库hashlib实现大部分哈希算法
- 使用pycryptodome库实现MD2算法
- 使用requests库处理URL下载
- 提供实时进度报告功能
- 详细的错误处理和诊断信息

## 开发与扩展

要添加新的文件操作工具：

1. 在`tools/`目录下创建新的工具实现和定义文件
2. 在`provider/file_operation.yaml`中添加对新工具的引用
3. 实现工具的具体逻辑，保持与现有架构的一致性



