identity:
    author: asiainfo
    name: query_advanced
    label:
      en_US: "Query Advanced"
      zh_Hans: "高级对象查询"
    description:
      en_US: "Advanced object query supporting flexible SQL-like where conditions and paging."
      zh_Hans: "高级对象查询（支持灵活的类 SQL 查询条件）"
    icon: icon.svg
    tags:
      - query
      - ontology
      - advanced

description:
    human:
      en_US: "Advanced object query supporting flexible SQL-like where conditions, selectable return fields, ordering and pagination."
      zh_Hans: "高级对象查询，支持类 SQL 的过滤条件、可选返回字段、排序与分页。"
    llm: "Advanced object query supporting flexible SQL-like where conditions."

parameters:
    - name: api_key
      type: string
      required: true
      label:
        en_US: "API Key"
        zh_Hans: "API 密钥"
      human_description:
        en_US: "API Key required to call the backend."
        zh_Hans: "调用接口所需的 API Key。"
      llm_description: "The API key for authenticating with the ontology service."
      form: llm

    - name: ontology_name
      type: string
      required: true
      label:
        en_US: "Ontology Name"
        zh_Hans: "本体名称"
      human_description:
        en_US: "The name of the ontology to query."
        zh_Hans: "要查询的本体名称（Ontology Name）。"
      llm_description: "The ontology name to search within."
      form: llm

    - name: object_name
      type: string
      required: true
      label:
        en_US: "Object Name"
        zh_Hans: "对象名称"
      human_description:
        en_US: "The name of the object inside the ontology to query."
        zh_Hans: "本体下的对象名称（Object Name）。"
      llm_description: "The object name within the ontology to query."
      form: llm

    - name: return_attrs
      type: array
      items:
        type: string
      required: false
      label:
        en_US: "Return Attributes"
        zh_Hans: "返回字段列表"
      human_description:
        en_US: "List of attribute names to return. If omitted, all attributes will be returned."
        zh_Hans: "指定需要返回的字段名称列表（不填则返回全部字段）。"
      llm_description: "Optional list of attribute names to return; return all if not provided."
      form: form

    - name: where_sql
      type: string
      required: false
      label:
        en_US: "Where SQL"
        zh_Hans: "查询条件（Where）"
      human_description:
        en_US: "SQL-like filter condition. Use %s as placeholders, e.g. \"age > %s AND status = %s\"."
        zh_Hans: "类 SQL 的过滤条件，支持占位符 %s，例如：age > %s AND status = %s。"
      llm_description: "SQL-like WHERE clause with %s placeholders for parameters."
      form: form

    - name: where_params
      type: array
      items:
        type: string
      required: false
      label:
        en_US: "Where Params"
        zh_Hans: "查询条件参数"
      human_description:
        en_US: "Parameters corresponding to %s placeholders in where_sql, in order."
        zh_Hans: "对应 where_sql 中占位符 %s 的参数值，按顺序填写。"
      llm_description: "List of parameter values to substitute into where_sql."
      form: form

    - name: order_by
      type: string
      required: false
      label:
        en_US: "Order By"
        zh_Hans: "排序规则"
      human_description:
        en_US: "Order clause, e.g. \"created_at DESC\"."
        zh_Hans: "排序字段与顺序，例如：created_at DESC。"
      llm_description: "Sort field and direction."
      form: form

    - name: page_size
      type: number
      required: false
      label:
        en_US: "Page Size"
        zh_Hans: "每页条数"
      human_description:
        en_US: "Number of items per page."
        zh_Hans: "每页返回的数据条数。"
      llm_description: "Page size for pagination."
      form: form

    - name: page_token
      type: number
      required: false
      label:
        en_US: "Page Token"
        zh_Hans: "分页游标"
      human_description:
        en_US: "Pagination cursor or offset for retrieving next page."
        zh_Hans: "分页偏移量或分页标识，用于获取下一页数据。"
      llm_description: "Pagination cursor/offset."
      form: form

output_schema:
    type: object
    properties:
      result:
        type: object
        title: "Query Result"
        description: "The query result object containing rows, paging info, etc."
        properties:
          rows:
            type: array
            items:
              type: object
            description: "List of result rows (each row is an object with requested attributes)."
          total:
            type: number
            description: "Total number of matched records (if available)."
          next_page_token:
            type: number
            description: "Token/offset to retrieve the next page (if any)."

extra:
    python:
      source: tools/getOntologyObjectDetails.py
      
